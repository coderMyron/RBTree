# RBTree
红黑树 插入、查找、删除

## 红黑树特性：
1.节点是红色或者黑色  
2.根节点是黑色  
3.每个叶子的节点都是黑色的空节点（NIL/NULL）  
4.每个红色节点的两个子节点都是黑色的  
5.从任意节点到其每个叶子的所有路径都包含相同数目的黑色节点  

最坏时间复杂度为O(2lgN)  

![image](https://github.com/coderMyron/RBTree/blob/master/%E7%BA%A2%E9%BB%91%E6%A0%91.jpg)

## 插入时需要根据当前指向的节点调整红黑树情况：    
情况1：红黑树只有一个根节点，如果是根节点，那么直接将节点变黑即可  
情况2：当前节点的父节点为黑色， 符合红黑树规则，不需要处理  
情况3：当前节点的父节点为红色，而叔叔节点也为红色（祖父节点和叔叔节点不为空），把父节点、叔叔节点都变为黑，祖父节点变为红，然后当前节点指针指向祖父节点再继续监测红黑树  
情况4：当前节点的父节点为红色，而叔叔节点为黑色，或者为空，分为下面类型：  
当父节点是祖父节点的左孩子，  
当前节点是父节点的左孩子，这时候只需要把父节点变为黑，祖父节点变成红，当前节点指向祖父节点，并在祖父节点向右旋转；  
当前节点是父节点的右孩子，那么先把当前节点指向父节点，然后在父节点左旋  
父节点是祖父节点的右孩子  
当前节点是父节点的左孩子，那么先把当前节点指向父节点，然后在父节点右旋  
当前节点是父节点的右孩子，这时候只需要把父节点变为黑，祖父节点变成红，当前节点指向祖父节点，并在祖父节点向左旋转  

## 针对当前节点是父节点的左孩子的情况讨论，当前节点是右孩子的话，旋转就相反  
情况1：当前节点的兄弟节点为红色，则根据从任意节点出发，各个分子的黑高度是一样的规则，那么兄弟节点的孩子树中必有黑节点，则把兄弟节点变为黑，父节点变为红，然后以父节点左旋，旋转之后，兄弟节点的左孩子则变成当前节点的兄弟节点（变成情况2）。  
情况2：兄弟节点为黑，其子孩子都为黑，那么则把兄弟节点变为红，然后当前节点移到其父节点。  
情况3：兄弟节点为黑，其左孩子为红，右孩子为黑，那么则把左孩子变黑，兄弟节点变红，然后在兄弟节点右旋，这样当前节点的兄弟节点则变成了右转后的左节点（变成情况4）  
情况4：兄弟节点为黑，其右孩子为红，那么则把兄弟节点的颜色变成其父节点的颜色，而父节点的颜色变成黑，兄弟节点的右孩子变为黑，在父节点左旋  
情况5：兄弟节点为空，则直接把当前节点指向其父节点再处理  

## 删除时需要平衡旋转  
1.先处理没有旋转的情况  
情况5  
情况2  
2.接下来处理需要进行旋转的情况，区别当前节点是左孩子还是右孩子  
2.1左孩子  
情况1  
情况3  
情况4  
2.2右孩子  
情况1  
情况3  
情况4  
注意：平衡后再替换到删除结点的位置。  

### 示例
RBTree * rbTree = [RBTree sharedRBTree];  
[rbTree addValue:@1];  
[rbTree addValue:@2];  
[rbTree addValue:@3];  
[rbTree addValue:@4];  
[rbTree addValue:@5];  
[rbTree addValue:@6];  
[rbTree addValue:@7];  
[rbTree addValue:@8];  
[rbTree addValue:@9];  


NSLog(@"%@",rbTree);  

NSLog(@"中序遍历");  
[rbTree.getRootTreeNode traverseInOrder:^(int num) {  
    NSLog(@"%d",num);  
}];  

NSLog(@"前序遍历");  
[rbTree.getRootTreeNode traversePreOrder:^(int num) {  
    NSLog(@"%d",num);  
}];  

NSLog(@"后序遍历");  
[rbTree.getRootTreeNode traversePostOrder:^(int num) {  
    NSLog(@"%d",num);  
}];  

NSLog(@"search 8");  
RBTreeNode * searchNode = [rbTree searchNodeWithParentValue:rbTree.getRootTreeNode withSearchValue:@8];  
NSLog(@"%@",searchNode);  

NSLog(@"delete 4");  
[rbTree deleteValue:@4];  
NSLog(@"%@",rbTree);  

### 打印
   ┌───9红  
 ┌───8黑   
 | └───7红  
┌───6红  
| └───5黑  
4黑  
| ┌───3黑  
└───2红  
 └───1黑   
中序遍历  
1  
2  
3  
4  
5  
6  
7  
8  
9  
前序遍历  
4  
2  
1  
3  
6  
5  
8  
7  
9  
后序遍历  
1  
3  
2  
5  
7  
9  
8  
6  
4  
search 8  
 ┌───9红  
8黑  
└───7红  
delete 4  
  ┌───9红  
 ┌───8黑  
 | └───7红  
┌───6红  
| └───5黑  
3黑  

└───2黑  
 └───1红  
